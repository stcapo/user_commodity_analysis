# ç”µå•†è¡Œä¸ºBIåˆ†æå¹³å° (ecom-behavior-bi-dual)

ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„ç”µå•†æ•°æ®å¯è§†åŒ–åˆ†æå¹³å°ï¼Œæ”¯æŒåŒç‰ˆæœ¬ä¸»é¢˜åˆ‡æ¢ï¼ˆæ·±è‰²åˆ†æç‰ˆV1å’Œæµ…è‰²å•†ä¸šç‰ˆV2ï¼‰ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 16+
- npm æˆ– yarn

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

åº”ç”¨å°†è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œè®¿é—® http://localhost:5173

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

## ğŸ“‹ é¡¹ç›®ç‰¹æ€§

### åŒç‰ˆæœ¬ä¸»é¢˜ç³»ç»Ÿ
- **V1 - æ·±è‰²åˆ†æç‰ˆ**: é‡‡ç”¨ç»ç’ƒæ€è®¾è®¡ï¼Œæ·±è“ç´«è‰²è°ƒï¼Œé€‚åˆæ•°æ®åˆ†æå¸ˆ
- **V2 - æµ…è‰²å•†ä¸šç‰ˆ**: æ¸…çˆ½ç¼–è¾‘é£æ ¼ï¼Œä¸“ä¸šè“ç°è‰²è°ƒï¼Œé€‚åˆç®¡ç†å±‚å±•ç¤º

### æ ¸å¿ƒåŠŸèƒ½
- âœ… 6ä¸ªV1ä¸“å±å›¾è¡¨ + 6ä¸ªV2ä¸“å±å›¾è¡¨
- âœ… å…¨å±€ç­›é€‰ç³»ç»Ÿï¼ˆæ—¥æœŸã€å“ç±»ã€æ”¯ä»˜æ–¹å¼ã€æ€§åˆ«ã€å¹´é¾„æ®µï¼‰
- âœ… å®æ—¶æ•°æ®èšåˆå’Œè®¡ç®—
- âœ… é¡µé¢å¯¼å‡ºä¸ºPNGåŠŸèƒ½
- âœ… å“åº”å¼è®¾è®¡ï¼ˆæ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœºï¼‰
- âœ… å®Œæ•´çš„é˜Ÿåˆ—åˆ†æå’Œç•™å­˜è¿½è¸ª

### é¡µé¢ç»“æ„
1. **æ€»è§ˆå¤§ç›˜** - KPIæ¦‚è§ˆ + 6ä¸ªæ ¸å¿ƒå›¾è¡¨
2. **ç”¨æˆ·ç”»åƒ** - æ€§åˆ«ã€å¹´é¾„ã€æ”¯ä»˜æ–¹å¼åˆ†å¸ƒåˆ†æ
3. **å“ç±»æ´å¯Ÿ** - å“ç±»è¶‹åŠ¿ã€å¢é•¿æ’è¡Œã€å®¢å•ä»·åˆ†æ
4. **å¤è´­åˆ†æ** - é˜Ÿåˆ—ç•™å­˜åˆ†æå’Œå¤è´­ç‡è¿½è¸ª

## ğŸ“Š æ•°æ®æŒ‡æ ‡

### KPIæŒ‡æ ‡
- **GMV** - å•†å“äº¤æ˜“æ€»é¢
- **è®¢å•æ•°** - æ€»äº¤æ˜“ç¬”æ•°
- **ä¹°å®¶æ•°** - å»é‡å®¢æˆ·æ•°
- **æ€»é”€é‡** - å•†å“æ€»ä»¶æ•°
- **å®¢å•ä»·(AOV)** - å¹³å‡è®¢å•ä»·å€¼
- **ä»¶å•ä»·(IPV)** - å¹³å‡å•†å“ä»·æ ¼
- **å¤è´­ç‡** - é‡å¤è´­ä¹°å®¢æˆ·å æ¯”

### åˆ†æç»´åº¦
- æ—¶é—´ç»´åº¦ï¼šæ—¥ã€å‘¨ã€æœˆçº§åˆ«è¶‹åŠ¿
- å•†å“ç»´åº¦ï¼šå“ç±»åˆ†å¸ƒã€å¢é•¿æ’è¡Œ
- ç”¨æˆ·ç»´åº¦ï¼šæ€§åˆ«ã€å¹´é¾„ã€æ”¯ä»˜æ–¹å¼
- è¡Œä¸ºç»´åº¦ï¼šé˜Ÿåˆ—åˆ†æã€ç•™å­˜ç‡ã€å¤è´­é—´éš”

## ğŸ”§ APIé›†æˆæŒ‡å—

### æ›¿æ¢æ¨¡æ‹Ÿæ•°æ®

ç¼–è¾‘ `src/services/api.ts` æ–‡ä»¶ï¼Œå°† `generateMockData()` æ›¿æ¢ä¸ºå®é™…APIè°ƒç”¨ï¼š

```typescript
export async function fetchTransactionData(): Promise<TransactionRow[]> {
  const response = await fetch('https://your-api.com/api/transactions');
  
  if (!response.ok) {
    throw new Error(`API Error: ${response.statusText}`);
  }
  
  const data = await response.json();
  
  // è½¬æ¢APIå“åº”æ ¼å¼
  return data.map(item => ({
    customer_id: item.customerId,
    gender: item.gender,
    age: item.age,
    category: item.productCategory,
    quantity: item.qty,
    price: item.unitPrice,
    payment_method: item.paymentType,
    invoice_date: item.transactionDate
  }));
}
```

### æ•°æ®æ ¼å¼è¦æ±‚

APIå¿…é¡»è¿”å›ç¬¦åˆä»¥ä¸‹æ¥å£çš„æ•°æ®ï¼š

```typescript
interface TransactionRow {
  customer_id: string;      // å®¢æˆ·ID
  gender: 'Male' | 'Female'; // æ€§åˆ«
  age: number;              // å¹´é¾„
  category: string;         // å•†å“ç±»åˆ«
  quantity: number;         // è´­ä¹°æ•°é‡
  price: number;            // å•ä»·
  payment_method: string;   // æ”¯ä»˜æ–¹å¼
  invoice_date: string;     // äº¤æ˜“æ—¥æœŸ (YYYY-MM-DD)
}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ main.tsx                 # åº”ç”¨å…¥å£
â”œâ”€â”€ App.tsx                  # è·¯ç”±é…ç½®
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ global.css          # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ themes.ts           # V1/V2ä¸»é¢˜é…ç½®
â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ AppLayout.tsx       # ä¸»å¸ƒå±€
â”‚   â”œâ”€â”€ TopBar.tsx          # é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â””â”€â”€ SideNav.tsx         # ä¾§è¾¹æ å¯¼èˆª
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ common/             # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ cards/              # å¡ç‰‡ç»„ä»¶
â”‚   â””â”€â”€ charts/             # å›¾è¡¨ç»„ä»¶
â”œâ”€â”€ pages/                  # é¡µé¢ç»„ä»¶
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api.ts             # APIæ¥å£ï¼ˆä¿®æ”¹æ­¤æ–‡ä»¶é›†æˆçœŸå®APIï¼‰
â”‚   â”œâ”€â”€ mockData.ts        # æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆ
â”‚   â””â”€â”€ dataAdapter.ts     # æ•°æ®è½¬æ¢å±‚
â”œâ”€â”€ hooks/                 # Reactè‡ªå®šä¹‰Hook
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/                 # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ constants/             # å¸¸é‡å®šä¹‰
```

## ğŸ¨ ä¸»é¢˜å®šåˆ¶

### ä¿®æ”¹V1ä¸»é¢˜ï¼ˆæ·±è‰²ï¼‰
ç¼–è¾‘ `src/styles/themes.ts` ä¸­çš„ `themeV1` å¯¹è±¡ï¼š

```typescript
export const themeV1: ThemeConfig = {
  token: {
    colorPrimary: '#00D9FF',  // ä¸»è‰²è°ƒ
    colorBgBase: '#0a0e27',   // èƒŒæ™¯è‰²
    // ... å…¶ä»–é…ç½®
  }
};
```

### ä¿®æ”¹V2ä¸»é¢˜ï¼ˆæµ…è‰²ï¼‰
ç¼–è¾‘ `src/styles/themes.ts` ä¸­çš„ `themeV2` å¯¹è±¡ã€‚

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- React.memo é˜²æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
- useMemo ç¼“å­˜æ˜‚è´µçš„è®¡ç®—
- é˜²æŠ–å¤„ç†ç­›é€‰å˜åŒ–
- å›¾è¡¨ç»„ä»¶æ‡’åŠ è½½

## ğŸŒ æµè§ˆå™¨å…¼å®¹æ€§

- Chrome (æœ€æ–°ç‰ˆ)
- Firefox (æœ€æ–°ç‰ˆ)
- Safari (æœ€æ–°ç‰ˆ)
- Edge (æœ€æ–°ç‰ˆ)

## ğŸ“ è®¸å¯è¯

MIT

## ğŸ¤ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueæˆ–Pull Requestã€‚

## ğŸ“¦ ç¦»çº¿é•œåƒæ‰“åŒ…ä¸å¯åŠ¨ï¼ˆæ— éœ€ Docker Hubï¼‰

æœ¬é¡¹ç›®å·²æä¾›ç¦»çº¿é•œåƒåŒ…ï¼Œé€‚åˆåœ¨æ— ç½‘ç»œç¯å¢ƒä¸­éƒ¨ç½²è¿è¡Œã€‚

### 1) åœ¨æœ‰ç½‘ç¯å¢ƒæ‰“åŒ…é•œåƒ

ç¡®ä¿ä½ å·²ç»æ„å»ºå¥½å‰ç«¯å’Œåç«¯é•œåƒï¼Œç„¶åå¯¼å‡ºæ‰€æœ‰è¿è¡Œæ‰€éœ€é•œåƒï¼š

```bash
docker save -o offline-images.tar redis:7-alpine backend-producer mysql:8.0 confluentinc/cp-kafka:7.4.0 backend-frontend backend-api backend-spark-consumer confluentinc/cp-zookeeper:7.4.0
```

å°†ä»¥ä¸‹å†…å®¹é€šè¿‡ U ç›˜æ‹·è´åˆ°ç›®æ ‡æœºå™¨ï¼š
- é¡¹ç›®ä»“åº“å®Œæ•´ç›®å½•
- `offline-images.tar`

### 2) åœ¨ç¦»çº¿æœºå™¨åŠ è½½é•œåƒå¹¶å¯åŠ¨

åœ¨ç›®æ ‡æœºå™¨ä¸­ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•åæ‰§è¡Œï¼š

```bash
docker load -i offline-images.tar
docker compose -f backend/docker-compose.yml up -d --no-build --pull=never
```

### 3) è®¿é—®åœ°å€

å‰ç«¯é»˜è®¤ç«¯å£ä¸º `80`ï¼Œæµè§ˆå™¨è®¿é—®ï¼š

```
http://localhost/
```
