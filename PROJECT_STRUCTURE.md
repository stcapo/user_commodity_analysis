# é¡¹ç›®ç»“æ„è¯¦è§£

## ğŸ“ å®Œæ•´ç›®å½•æ ‘

```
ecom-behavior-bi-dual/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.tsx                    # Reactåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ App.tsx                     # è·¯ç”±é…ç½®å’Œä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ global.css              # å…¨å±€æ ·å¼å’ŒåŠ¨ç”»
â”‚   â”‚   â””â”€â”€ themes.ts               # V1/V2ä¸»é¢˜é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ AppLayout.tsx           # ä¸»å¸ƒå±€å®¹å™¨
â”‚   â”‚   â”œâ”€â”€ TopBar.tsx              # é¡¶éƒ¨å¯¼èˆªæ ï¼ˆç‰ˆæœ¬åˆ‡æ¢+å¯¼å‡ºï¼‰
â”‚   â”‚   â””â”€â”€ SideNav.tsx             # ä¾§è¾¹æ å¯¼èˆªèœå•
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”œâ”€â”€ KPICard.tsx         # KPIæŒ‡æ ‡å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ FilterBar.tsx       # å…¨å±€ç­›é€‰æ¡ä»¶æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingSkeleton.tsx # åŠ è½½éª¨æ¶å±
â”‚   â”‚   â”‚   â””â”€â”€ ExportButton.tsx    # å¯¼å‡ºæŒ‰é’®ï¼ˆå·²é›†æˆåˆ°TopBarï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ cards/
â”‚   â”‚   â”‚   â”œâ”€â”€ GlassCard.tsx       # V1ç»ç’ƒæ€å¡ç‰‡
â”‚   â”‚   â”‚   â””â”€â”€ PaperCard.tsx       # V2çº¸è´¨å¡ç‰‡
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ charts/
â”‚   â”‚       â”œâ”€â”€ v1/                 # V1ä¸“å±å›¾è¡¨
â”‚   â”‚       â”‚   â”œâ”€â”€ TrendChart.tsx           # GMVä¸è®¢å•åŒè½´è¶‹åŠ¿
â”‚   â”‚       â”‚   â”œâ”€â”€ CategoryDonutChart.tsx   # å“ç±»GMVç¯å½¢å›¾
â”‚   â”‚       â”‚   â”œâ”€â”€ CategoryBarChart.tsx     # çƒ­é—¨å“ç±»æ’è¡Œ
â”‚   â”‚       â”‚   â”œâ”€â”€ HeatmapChart.tsx         # å“ç±»Ã—æ”¯ä»˜æ–¹å¼çƒ­åŠ›å›¾
â”‚   â”‚       â”‚   â”œâ”€â”€ CalendarHeatmap.tsx      # æ—¥å†çƒ­åŠ›å›¾
â”‚   â”‚       â”‚   â””â”€â”€ HistogramChart.tsx       # å¹´é¾„åˆ†å¸ƒç›´æ–¹å›¾
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ v2/                 # V2ä¸“å±å›¾è¡¨
â”‚   â”‚           â”œâ”€â”€ AreaChart.tsx            # GMVå¢é•¿é¢ç§¯å›¾
â”‚   â”‚           â”œâ”€â”€ StackedAreaChart.tsx     # æ–°è€ç”¨æˆ·å †å é¢ç§¯
â”‚   â”‚           â”œâ”€â”€ DistributionChart.tsx    # è®¢å•é‡‘é¢åˆ†å¸ƒ
â”‚   â”‚           â”œâ”€â”€ StackedBarChart.tsx      # æ”¯ä»˜æ–¹å¼å æ¯”è¶‹åŠ¿
â”‚   â”‚           â”œâ”€â”€ ParetoChart.tsx          # ç”¨æˆ·GMVå¸•ç´¯æ‰˜å›¾
â”‚   â”‚           â””â”€â”€ GrowthRankChart.tsx      # å“ç±»å¢é•¿æ’è¡Œ
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx            # æ€»è§ˆå¤§ç›˜ï¼ˆ6ä¸ªV1å›¾è¡¨æˆ–6ä¸ªV2å›¾è¡¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ UserSegments.tsx         # ç”¨æˆ·ç”»åƒï¼ˆæ€§åˆ«ã€å¹´é¾„ã€æ”¯ä»˜æ–¹å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ CategoryInsights.tsx      # å“ç±»æ´å¯Ÿï¼ˆè¶‹åŠ¿ã€å¢é•¿ã€AOVï¼‰
â”‚   â”‚   â””â”€â”€ CohortAnalysis.tsx        # å¤è´­åˆ†æï¼ˆé˜Ÿåˆ—ç•™å­˜åˆ†æï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api.ts                   # â­ APIæ¥å£ï¼ˆä¿®æ”¹æ­¤æ–‡ä»¶é›†æˆçœŸå®APIï¼‰
â”‚   â”‚   â”œâ”€â”€ mockData.ts              # æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆï¼ˆ10000æ¡äº¤æ˜“è®°å½•ï¼‰
â”‚   â”‚   â””â”€â”€ dataAdapter.ts           # æ•°æ®è½¬æ¢å’Œèšåˆå±‚
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useFilters.ts            # å…¨å±€ç­›é€‰çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useTheme.ts              # ä¸»é¢˜åˆ‡æ¢çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ useExport.ts             # é¡µé¢å¯¼å‡ºåŠŸèƒ½
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ formatters.ts            # æ•°å­—ã€è´§å¸ã€æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°
â”‚   â”‚
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts                 # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚
â”‚   â””â”€â”€ constants/
â”‚       â””â”€â”€ index.ts                 # å¸¸é‡å®šä¹‰ï¼ˆå“ç±»ã€æ”¯ä»˜æ–¹å¼ç­‰ï¼‰
â”‚
â”œâ”€â”€ index.html                       # HTMLå…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json                     # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json                    # TypeScripté…ç½®
â”œâ”€â”€ tsconfig.node.json               # Node.js TypeScripté…ç½®
â”œâ”€â”€ vite.config.ts                   # Viteæ„å»ºé…ç½®
â”œâ”€â”€ .gitignore                       # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ SETUP_GUIDE.md                   # è®¾ç½®å’ŒAPIé›†æˆæŒ‡å—
â””â”€â”€ PROJECT_STRUCTURE.md             # æœ¬æ–‡ä»¶
```

## ğŸ”‘ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### src/services/api.ts
**æœ€é‡è¦çš„æ–‡ä»¶** - æ‰€æœ‰APIè°ƒç”¨éƒ½åœ¨è¿™é‡Œã€‚ä¿®æ”¹æ­¤æ–‡ä»¶ä»¥é›†æˆçœŸå®APIã€‚

```typescript
// å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
export async function fetchTransactionData(): Promise<TransactionRow[]> {
  const cachedData = generateMockData();
  return cachedData;
}

// ä¿®æ”¹ä¸ºçœŸå®APIè°ƒç”¨
export async function fetchTransactionData(): Promise<TransactionRow[]> {
  const response = await fetch('https://your-api.com/api/transactions');
  return response.json();
}
```

### src/services/dataAdapter.ts
æ•°æ®å¤„ç†çš„æ ¸å¿ƒï¼ŒåŒ…å«æ‰€æœ‰æ•°æ®èšåˆé€»è¾‘ï¼š

- `applyFilters()` - åº”ç”¨æ—¥æœŸã€å“ç±»ã€æ”¯ä»˜æ–¹å¼ã€æ€§åˆ«ã€å¹´é¾„ç­›é€‰
- `calculateMetrics()` - è®¡ç®—GMVã€è®¢å•æ•°ã€å®¢å•ä»·ç­‰KPI
- `getDashboardData()` - ç”Ÿæˆä»ªè¡¨æ¿æ‰€éœ€çš„æ‰€æœ‰æ•°æ®
- `getUserSegmentsData()` - ç”Ÿæˆç”¨æˆ·åˆ†ææ•°æ®
- `getCategoryData()` - ç”Ÿæˆå“ç±»åˆ†ææ•°æ®
- `getCohortData()` - ç”Ÿæˆé˜Ÿåˆ—åˆ†ææ•°æ®

### src/hooks/useFilters.ts
å…¨å±€ç­›é€‰çŠ¶æ€ç®¡ç†ï¼Œæ‰€æœ‰é¡µé¢å…±äº«åŒä¸€ç­›é€‰çŠ¶æ€ã€‚

### src/styles/themes.ts
V1å’ŒV2ä¸»é¢˜é…ç½®ï¼ŒåŒ…å«æ‰€æœ‰é¢œè‰²ã€é—´è·ã€é˜´å½±ç­‰è®¾è®¡ä»¤ç‰Œã€‚

## ğŸ“Š æ•°æ®æµ

```
fetchTransactionData()
    â†“
applyFilters() â†’ è¿‡æ»¤æ•°æ®
    â†“
getDashboardData() / getUserSegmentsData() / getCategoryData() / getCohortData()
    â†“
é¡µé¢ç»„ä»¶ â†’ å›¾è¡¨ç»„ä»¶ â†’ EChartsæ¸²æŸ“
```

## ğŸ¨ ä¸»é¢˜ç³»ç»Ÿ

### V1 - æ·±è‰²åˆ†æç‰ˆ
- èƒŒæ™¯ï¼šæ·±è“ç´«è‰²æ¸å˜
- ä¸»è‰²ï¼šé’è‰² (#00D9FF)
- å¡ç‰‡ï¼šç»ç’ƒæ€ï¼ˆåŠé€æ˜+æ¨¡ç³Šï¼‰
- é€‚åˆï¼šæ•°æ®åˆ†æå¸ˆã€æŠ€æœ¯äººå‘˜

### V2 - æµ…è‰²å•†ä¸šç‰ˆ
- èƒŒæ™¯ï¼šæµ…ç°è‰²
- ä¸»è‰²ï¼šä¸“ä¸šè“ (#1890FF)
- å¡ç‰‡ï¼šçº¸è´¨é£æ ¼ï¼ˆç™½è‰²+é˜´å½±ï¼‰
- é€‚åˆï¼šç®¡ç†å±‚ã€ä¸šåŠ¡å±•ç¤º

## ğŸ“ˆ å›¾è¡¨å¯¹æ¯”

| æŒ‡æ ‡ | V1 | V2 |
|------|----|----|
| è¶‹åŠ¿å›¾ | åŒè½´æŠ˜çº¿+æŸ±çŠ¶ | é¢ç§¯å›¾ |
| å“ç±»åˆ†å¸ƒ | ç¯å½¢å›¾ | å †å é¢ç§¯ |
| æ’è¡Œ | æ¨ªå‘æŸ±çŠ¶ | å¢é•¿ç‡æ’è¡Œ |
| çƒ­åŠ›å›¾ | å“ç±»Ã—æ”¯ä»˜ | ç”¨æˆ·Ã—å“ç±» |
| åˆ†å¸ƒ | æ—¥å†çƒ­åŠ› | è®¢å•é‡‘é¢åˆ†å¸ƒ |
| åˆ†æ | å¹´é¾„ç›´æ–¹å›¾ | å¸•ç´¯æ‰˜å›¾ |

## ğŸ”„ çŠ¶æ€ç®¡ç†

ä½¿ç”¨React Hooksè¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼š
- `useFilters()` - ç­›é€‰çŠ¶æ€
- `useTheme()` - ä¸»é¢˜çŠ¶æ€
- `useState()` - ç»„ä»¶æœ¬åœ°çŠ¶æ€
- `useEffect()` - æ•°æ®åŠ è½½

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

- React.memo é˜²æ­¢ä¸å¿…è¦é‡æ–°æ¸²æŸ“
- useMemo ç¼“å­˜è®¡ç®—ç»“æœ
- é˜²æŠ–å¤„ç†ç­›é€‰å˜åŒ–
- å›¾è¡¨ç»„ä»¶æ‡’åŠ è½½

## ğŸ“± å“åº”å¼è®¾è®¡

ä½¿ç”¨Ant Designçš„Gridç³»ç»Ÿï¼š
- xs: æ‰‹æœº (< 576px)
- sm: å°å¹³æ¿ (576px - 768px)
- md: å¹³æ¿ (768px - 992px)
- lg: æ¡Œé¢ (> 992px)

